	package com.app.controllers;
	
	import com.app.dto.EbookDto;
	import com.app.services.BookService;
	
	import org.springframework.beans.factory.annotation.Autowired;
	import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.PostMapping;
	import org.springframework.web.bind.annotation.RequestBody;
	import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RequestPart;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.multipart.MultipartFile;
	




@RestController
@RequestMapping("/books")
public class BookController {

    @Autowired
    private BookService bookService;

    @PostMapping(value = "/upload", consumes = "multipart/form-data")
    public ResponseEntity<String> uploadBook(
                                             @ModelAttribute("epubFile") EbookDto ebookDto) {
        System.out.println("in upload book method");
        try {
           // ebookDto.setEpubFile(epubFile);
            //ebookDto.setCoverImage(coverImage);
            System.out.println(ebookDto);
            return bookService.uploadBook(ebookDto);
        } catch (Exception e) {
            e.printStackTrace();
            return ResponseEntity.status(500).body("Failed to upload book.");
        }
    }
}



//	@RestController
//	@RequestMapping("/books")
//	public class BookController {
//	@Autowired
//		private  BookService bookService;
//	
//		
//	
//	@PostMapping(value = "/upload", consumes = "multipart/form-data")
//	public ResponseEntity<String> uploadBook(@RequestBody EbookDto ebookDto
//	                                         ) {
//	    System.out.println("in upload book method");
//		try {
//	        
//	        System.out.println(ebookDto);
//	        return bookService.uploadBook(ebookDto);
//	    } catch (Exception e) {
//	        e.printStackTrace();
//	        return ResponseEntity.status(500).body("Failed to upload book.");
//	    }
//	}
//	
//	//    @PostMapping(value = "/upload", consumes = "multipart/form-data")
//	//    public ResponseEntity<String> uploadBook(
//	//            @RequestParam("epubFile") MultipartFile epubFile,
//	//            @RequestParam("coverImage") MultipartFile coverImage) {
//	//
//	//        try {
//	//            return bookService.uploadBook(epubFile, coverImage);
//	//        } catch (Exception e) {
//	//            e.printStackTrace();
//	//            return ResponseEntity.status(500).body("Failed to upload book.");
//	//        }
//	//    }         
//	}
